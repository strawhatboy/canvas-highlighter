// canvas-highlighter Version 1.0.0. Copyright 2017 undefined.
(function(t){"use strict";function e(){}function n(){n.init.call(this)}function r(t){return void 0===t._maxListeners?n.defaultMaxListeners:t._maxListeners}function i(t,e,n){if(e)t.call(n);else for(var r=t.length,i=d(t,r),o=0;o<r;++o)i[o].call(n)}function o(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=d(t,i),s=0;s<i;++s)o[s].call(n,r)}function s(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,s=d(t,o),a=0;a<o;++a)s[a].call(n,r,i)}function a(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var s=t.length,a=d(t,s),u=0;u<s;++u)a[u].call(n,r,i,o)}function u(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=d(t,i),s=0;s<i;++s)o[s].apply(n,r)}function c(t,n,i,o){var s,a,u;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((a=t._events)?(a.newListener&&(t.emit("newListener",n,i.listener?i.listener:i),a=t._events),u=a[n]):(a=t._events=new e,t._eventsCount=0),u){if("function"==typeof u?u=a[n]=o?[i,u]:[u,i]:o?u.unshift(i):u.push(i),!u.warned&&(s=r(t))&&s>0&&u.length>s){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+n+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=n,c.count=u.length,l(c)}}else u=a[n]=i,++t._eventsCount;return t}function l(t){"function"==typeof console.warn?console.warn(t):console.log(t)}function h(t,e,n){function r(){t.removeListener(e,r),i||(i=!0,n.apply(t,arguments))}var i=!1;return r.listener=n,r}function f(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function p(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function d(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function v(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function y(t,e){return t===e||t!==t&&e!==e}function _(t,e){for(var n=t.length;n--;)if(y(t[n][0],e))return n;return-1}function b(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function g(t){var e=pt.call(t,vt),n=t[vt];try{t[vt]=void 0;var r=!0}catch(t){}var i=dt.call(t);return r&&(e?t[vt]=n:delete t[vt]),i}function m(t){return yt.call(t)}function E(t){return null==t?void 0===t?bt:_t:gt&&gt in Object(t)?g(t):m(t)}function w(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function j(t){if(!w(t))return!1;var e=E(t);return e==Et||e==wt||e==mt||e==jt}function C(t){return!!Ot&&Ot in t}function O(t){if(null!=t){try{return Tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function T(t){return!(!w(t)||C(t))&&(j(t)?zt:Lt).test(O(t))}function A(t,e){return null==t?void 0:t[e]}function L(t,e){var n=A(t,e);return T(n)?n:void 0}function S(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function R(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function x(t,e){var n=t.__data__;return R(e)?n["string"==typeof e?"string":"hash"]:n.map}function k(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function z(t){var e=this.__data__=new b(t);this.size=e.size}function D(t,e,n){"__proto__"==e&&Vt?Vt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function P(t,e,n){var r=t[e];Ft.call(t,e)&&y(r,n)&&(void 0!==n||e in t)||D(t,e,n)}function M(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),i?D(n,a,u):P(n,a,u)}return n}function I(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function N(t){return null!=t&&"object"==typeof t}function B(t){return N(t)&&E(t)==qt}function U(t,e){return!!(e=null==e?Qt:e)&&("number"==typeof t||Xt.test(t))&&t>-1&&t%1==0&&t<e}function V(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=te}function F(t,e){var n=st(t),r=!n&&Kt(t),i=!n&&!r&&Jt(t),o=!n&&!r&&!i&&ae(t),s=n||r||i||o,a=s?I(t.length,String):[],u=a.length;for(var c in t)!e&&!ue.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||U(c,u))||a.push(c);return a}function q(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ce)}function W(t){if(!q(t))return le(t);var e=[];for(var n in Object(t))he.call(t,n)&&"constructor"!=n&&e.push(n);return e}function $(t){return null!=t&&V(t.length)&&!j(t)}function H(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function K(t){if(!w(t))return H(t);var e=q(t),n=[];for(var r in t)("constructor"!=r||!e&&fe.call(t,r))&&n.push(r);return n}function Z(t){return $(t)?F(t,!0):K(t)}function Y(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new k;++e<n;)this.add(t[e])}function G(t){return t}function J(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Q(t,e,n){return e=Se(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Se(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),J(t,this,a)}}function X(t){return function(){return t}}function tt(t,e){return De(Q(t,e,G),t+"")}function et(t,e,n){if(!w(n))return!1;var r=typeof e;return!!("number"==r?$(n)&&U(e,n.length):"string"==r&&e in n)&&y(n[e],t)}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function it(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ot={ClassNames:{MASK:"canvas-highlighter-mask",RECT:"canvas-highlighter-rect",RECT_STAND_BY:"canvas-highlighter-rect-stand-by",RECT_ACTIVED:"canvas-highlighter-rect-actived",RECT_SELECTED:"canvas-highlighter-rect-selected"},Events:{RECT_ACTIVED:"RECT_ACTIVED",RECT_DISACTIVED:"RECT_DISACTIVED",RECT_SELECTED:"RECT_SELECTED",RECT_UNSELECTED:"RECT_UNSELECTED"}};e.prototype=Object.create(null),n.EventEmitter=n,n.usingDomains=!1,n.prototype.domain=void 0,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.init=function(){this.domain=null,n.usingDomains&&(!(void 0).active||this instanceof(void 0).Domain||(this.domain=(void 0).active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new e,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},n.prototype.getMaxListeners=function(){return r(this)},n.prototype.emit=function(t){var e,n,r,c,l,h,f,p="error"===t;if(h=this._events)p=p&&null==h.error;else if(!p)return!1;if(f=this.domain,p){if(e=arguments[1],!f){if(e instanceof Error)throw e;var d=new Error('Uncaught, unspecified "error" event. ('+e+")");throw d.context=e,d}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=f,e.domainThrown=!1,f.emit("error",e),!1}if(!(n=h[t]))return!1;var v="function"==typeof n;switch(r=arguments.length){case 1:i(n,v,this);break;case 2:o(n,v,this,arguments[1]);break;case 3:s(n,v,this,arguments[1],arguments[2]);break;case 4:a(n,v,this,arguments[1],arguments[2],arguments[3]);break;default:for(c=new Array(r-1),l=1;l<r;l++)c[l-1]=arguments[l];u(n,v,this,c)}return!0},n.prototype.addListener=function(t,e){return c(this,t,e,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(t,e){return c(this,t,e,!0)},n.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,h(this,t,e)),this},n.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,h(this,t,e)),this},n.prototype.removeListener=function(t,n){var r,i,o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(r=i[t]))return this;if(r===n||r.listener&&r.listener===n)0==--this._eventsCount?this._events=new e:(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if("function"!=typeof r){for(o=-1,s=r.length;s-- >0;)if(r[s]===n||r[s].listener&&r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new e,this;delete i[t]}else p(r,o);i.removeListener&&this.emit("removeListener",t,a||n)}return this},n.prototype.removeAllListeners=function(t){var n,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new e,this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=new e:delete r[t]),this;if(0===arguments.length){for(var i,o=Object.keys(r),s=0;s<o.length;++s)"removeListener"!==(i=o[s])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new e,this._eventsCount=0,this}if("function"==typeof(n=r[t]))this.removeListener(t,n);else if(n)do{this.removeListener(t,n[n.length-1])}while(n[0]);return this},n.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:v(e):[]},n.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},n.prototype.listenerCount=f,n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var st=Array.isArray,at=Array.prototype.splice;b.prototype.clear=function(){this.__data__=[],this.size=0},b.prototype.delete=function(t){var e=this.__data__,n=_(e,t);return!(n<0||(n==e.length-1?e.pop():at.call(e,n,1),--this.size,0))},b.prototype.get=function(t){var e=this.__data__,n=_(e,t);return n<0?void 0:e[n][1]},b.prototype.has=function(t){return _(this.__data__,t)>-1},b.prototype.set=function(t,e){var n=this.__data__,r=_(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var ut="object"==typeof global&&global&&global.Object===Object&&global,ct="object"==typeof self&&self&&self.Object===Object&&self,lt=ut||ct||Function("return this")(),ht=lt.Symbol,ft=Object.prototype,pt=ft.hasOwnProperty,dt=ft.toString,vt=ht?ht.toStringTag:void 0,yt=Object.prototype.toString,_t="[object Null]",bt="[object Undefined]",gt=ht?ht.toStringTag:void 0,mt="[object AsyncFunction]",Et="[object Function]",wt="[object GeneratorFunction]",jt="[object Proxy]",Ct=lt["__core-js_shared__"],Ot=function(){var t=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Tt=Function.prototype.toString,At=/[\\^$.*+?()[\]{}|]/g,Lt=/^\[object .+?Constructor\]$/,St=Function.prototype,Rt=Object.prototype,xt=St.toString,kt=Rt.hasOwnProperty,zt=RegExp("^"+xt.call(kt).replace(At,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dt=L(lt,"Map"),Pt=L(Object,"create"),Mt="__lodash_hash_undefined__",It=Object.prototype.hasOwnProperty,Nt=Object.prototype.hasOwnProperty,Bt="__lodash_hash_undefined__";S.prototype.clear=function(){this.__data__=Pt?Pt(null):{},this.size=0},S.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},S.prototype.get=function(t){var e=this.__data__;if(Pt){var n=e[t];return n===Mt?void 0:n}return It.call(e,t)?e[t]:void 0},S.prototype.has=function(t){var e=this.__data__;return Pt?void 0!==e[t]:Nt.call(e,t)},S.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pt&&void 0===e?Bt:e,this},k.prototype.clear=function(){this.size=0,this.__data__={hash:new S,map:new(Dt||b),string:new S}},k.prototype.delete=function(t){var e=x(this,t).delete(t);return this.size-=e?1:0,e},k.prototype.get=function(t){return x(this,t).get(t)},k.prototype.has=function(t){return x(this,t).has(t)},k.prototype.set=function(t,e){var n=x(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var Ut=200;z.prototype.clear=function(){this.__data__=new b,this.size=0},z.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},z.prototype.get=function(t){return this.__data__.get(t)},z.prototype.has=function(t){return this.__data__.has(t)},z.prototype.set=function(t,e){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!Dt||r.length<Ut-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new k(r)}return n.set(t,e),this.size=n.size,this};var Vt=function(){try{var t=L(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ft=Object.prototype.hasOwnProperty,qt="[object Arguments]",Wt=Object.prototype,$t=Wt.hasOwnProperty,Ht=Wt.propertyIsEnumerable,Kt=B(function(){return arguments}())?B:function(t){return N(t)&&$t.call(t,"callee")&&!Ht.call(t,"callee")},Zt="object"==typeof t&&t&&!t.nodeType&&t,Yt=Zt&&"object"==typeof module&&module&&!module.nodeType&&module,Gt=Yt&&Yt.exports===Zt?lt.Buffer:void 0,Jt=(Gt?Gt.isBuffer:void 0)||function(){return!1},Qt=9007199254740991,Xt=/^(?:0|[1-9]\d*)$/,te=9007199254740991,ee={};ee["[object Float32Array]"]=ee["[object Float64Array]"]=ee["[object Int8Array]"]=ee["[object Int16Array]"]=ee["[object Int32Array]"]=ee["[object Uint8Array]"]=ee["[object Uint8ClampedArray]"]=ee["[object Uint16Array]"]=ee["[object Uint32Array]"]=!0,ee["[object Arguments]"]=ee["[object Array]"]=ee["[object ArrayBuffer]"]=ee["[object Boolean]"]=ee["[object DataView]"]=ee["[object Date]"]=ee["[object Error]"]=ee["[object Function]"]=ee["[object Map]"]=ee["[object Number]"]=ee["[object Object]"]=ee["[object RegExp]"]=ee["[object Set]"]=ee["[object String]"]=ee["[object WeakMap]"]=!1;var ne="object"==typeof t&&t&&!t.nodeType&&t,re=ne&&"object"==typeof module&&module&&!module.nodeType&&module,ie=re&&re.exports===ne&&ut.process,oe=function(){try{return ie&&ie.binding&&ie.binding("util")}catch(t){}}(),se=oe&&oe.isTypedArray,ae=se?function(t){return function(e){return t(e)}}(se):function(t){return N(t)&&V(t.length)&&!!ee[E(t)]},ue=Object.prototype.hasOwnProperty,ce=Object.prototype,le=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),he=Object.prototype.hasOwnProperty,fe=Object.prototype.hasOwnProperty,pe=(Object.prototype.propertyIsEnumerable,Object.getOwnPropertySymbols,L(lt,"DataView")),de=L(lt,"Promise"),ve=L(lt,"Set"),ye=L(lt,"WeakMap"),_e=O(pe),be=O(Dt),ge=O(de),me=O(ve),Ee=O(ye),we=E;(pe&&"[object DataView]"!=we(new pe(new ArrayBuffer(1)))||Dt&&"[object Map]"!=we(new Dt)||de&&"[object Promise]"!=we(de.resolve())||ve&&"[object Set]"!=we(new ve)||ye&&"[object WeakMap]"!=we(new ye))&&(we=function(t){var e=E(t),n="[object Object]"==e?t.constructor:void 0,r=n?O(n):"";if(r)switch(r){case _e:return"[object DataView]";case be:return"[object Map]";case ge:return"[object Promise]";case me:return"[object Set]";case Ee:return"[object WeakMap]"}return e});Function.prototype.toString.call(Object);var je="__lodash_hash_undefined__";Y.prototype.add=Y.prototype.push=function(t){return this.__data__.set(t,je),this},Y.prototype.has=function(t){return this.__data__.has(t)};var Ce=ht?ht.prototype:void 0,Oe=(Ce&&Ce.valueOf,Object.prototype.hasOwnProperty,Object.prototype.hasOwnProperty,"[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]"),Te="(?:\\ud83c[\\udde6-\\uddff]){2}",Ae="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Se=(["[^\\ud800-\\udfff]",Te,Ae].join("|"),["[^\\ud800-\\udfff]"+Oe+"?",Oe,Te,Ae,"[\\ud800-\\udfff]"].join("|"),Math.max),Re=Vt?function(t,e){return Vt(t,"toString",{configurable:!0,enumerable:!1,value:X(e),writable:!0})}:G,xe=800,ke=16,ze=Date.now,De=function(t){var e=0,n=0;return function(){var r=ze(),i=ke-(r-n);if(n=r,i>0){if(++e>=xe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Re),Pe=function(t){return tt(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&et(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})}(function(t,e){M(e,Z(e),t)}),Me=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ie=function(t){function e(t){nt(this,e);var n=rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t&&(n.sourceElementSelector=t.sourceElement,n.targetElementSelector=t.targetElement,n.data=t.data,n.standByClass=t.standByClass||ot.ClassNames.RECT_STAND_BY,n.activedClass=t.activedClass||ot.ClassNames.RECT_ACTIVED,n.selectedClass=t.selectedClass||ot.ClassNames.RECT_SELECTED,n.frameSize=t.frameSize,n.startingZIndex=t.startingZIndex||2e3),n._init(),n}return it(e,n),Me(e,[{key:"render",value:function(){this._createMaskLayer(),this._renderRects(this.data)}},{key:"reRender",value:function(){this.clean(),this._init(),this.render()}},{key:"clean",value:function(){for(var t=0;t<this.rects.length;t++)this.rects[t].remove();this.rects=[],this.mask.remove(),this.mask=void 0,this.q=[]}},{key:"_renderRects",value:function(t){if(st(t))for(var e=0;e<t.length;e++)this.q.push(t[e]);else w(t)&&this.q.push(t);for(;this.q.length>0;){var n=this.q.shift();if(this._createRectOnMaskLayer({rect:n,layerSize:this,frameSize:this.frameSize}),n.children)for(var r=0;r<n.children.length;r++)this.q.push(n.children[r])}}},{key:"_createMaskLayer",value:function(){var t=document.createElement("div");t.setAttribute("style","width:100%;height:100%;left:0;right:0;top:0;bottom:0;position:absolute"),t.setAttribute("class",ot.ClassNames.MASK),this.container.appendChild(t),this.mask=t,this.layerSize=this.layerSize||{width:this.mask.offsetWidth,height:this.mask.offsetHeight}}},{key:"_init",value:function(){this.sourceElement=document.querySelector(this.sourceElementSelector),this.targetElement=document.querySelector(this.targetElementSelector),this.targetElement?this.container=this.targetElement:this.container=this.sourceElement.parentElement,this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.rects=[],this.selectedRect={},this.selectedRealRect={},this.q=[]}},{key:"_createRectOnMaskLayer",value:function(t){var e=this,n=void 0,r=void 0,i=void 0;t&&(n=t.rect||{left:0,top:0,right:0,bottom:0},r=t.layerSize||{width:100,height:100},i=t.frameSize||{width:100,height:100});var o=n;(o=Pe({},n)).left=void 0==n.left?void 0:n.left*r.width/i.width,o.right=void 0==n.right?void 0:n.right*r.width/i.width,o.top=void 0==n.top?void 0:n.top*r.height/i.height,o.bottom=void 0==n.bottom?void 0:n.bottom*r.height/i.height,o.width=void 0==n.width?void 0:n.width*r.width/i.width,o.height=void 0==n.height?void 0:n.height*r.height/i.height;var s=document.createElement("div"),a="position:absolute;";void 0!=o.left&&(a+="left:"+o.left+"px;"),void 0!=o.right&&(a+="right:"+o.right+"px;"),void 0!=o.top&&(a+="top:"+o.top+"px;"),void 0!=o.bottom&&(a+="bottom:"+o.bottom+"px;"),void 0!=o.width&&(a+="width:"+o.width+"px;"),void 0!=o.height&&(a+="height:"+o.height+"px;"),a+="box-sizing: border-box;z-index: "+this.startingZIndex++,s.setAttribute("style",a),s.setAttribute("class",this.standByClass),s.addEventListener("mouseover",function(){e.selectedRect!=s&&s.setAttribute("class",e.activedClass),e.emit(ot.Events.RECT_ACTIVED,o)}),s.addEventListener("mouseout",function(){e.selectedRect!=s&&s.setAttribute("class",e.standByClass),e.emit(ot.Events.RECT_DISACTIVED,o)}),s.addEventListener("click",function(){e.selectedRect!=s?(j(e.selectedRect.setAttribute)&&(e.selectedRect.setAttribute("class",e.standByClass),e.emit(ot.Events.RECT_UNSELECTED,e.selectedRealRect)),e.selectedRect=s,e.selectedRealRect=o,s.setAttribute("class",e.selectedClass),e.emit(ot.Events.RECT_SELECTED,o)):(e.selectedRect={},s.setAttribute("class",e.standByClass),e.emit(ot.Events.RECT_UNSELECTED,o))}),this.container.appendChild(s),this.rects.push(s)}}]),e}();t.CanvasHighlighter=Ie})(this["canvas-highlighter"]=this["canvas-highlighter"]||{});